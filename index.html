<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tech News Hub</title>
    <!-- Use Inter font from Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles to enhance Tailwind */
        body {
            font-family: 'Inter', sans-serif;
            @apply bg-gray-100 text-gray-800;
        }
        .container {
            @apply max-w-7xl mx-auto p-4 md:p-8;
        }
        .article-card {
            @apply bg-white rounded-xl shadow-lg hover:shadow-xl transition-shadow duration-300 overflow-hidden;
        }
    </style>
</head>
<body class="antialiased">

    <!-- Header Section -->
    <header class="bg-indigo-600 text-white shadow-lg">
        <div class="container py-6 flex flex-col md:flex-row justify-between items-center">
            <h1 class="text-3xl font-bold mb-4 md:mb-0">Tech News Hub</h1>
            <form id="search-form" class="w-full md:w-auto flex flex-col sm:flex-row items-center gap-2">
                <input 
                    type="text" 
                    id="search-input" 
                    placeholder="Search for topics..."
                    class="w-full sm:w-64 p-3 rounded-lg border border-transparent focus:outline-none focus:ring-2 focus:ring-indigo-300 text-gray-800 transition-all duration-300 shadow-inner"
                >
                <button 
                    type="submit" 
                    class="w-full sm:w-auto px-6 py-3 bg-indigo-500 hover:bg-indigo-400 text-white font-semibold rounded-lg shadow-md transition-colors duration-300"
                >
                    Search
                </button>
            </form>
        </div>
    </header>

    <!-- Category Navigation -->
    <nav class="bg-white shadow-md rounded-xl mx-auto max-w-7xl p-4 mt-6">
        <div class="flex flex-wrap justify-center items-center gap-4">
            <button class="category-btn bg-indigo-500 hover:bg-indigo-400 text-white font-semibold py-2 px-4 rounded-lg transition-colors duration-300 shadow-md" data-category="technology">Technology</button>
            <button class="category-btn bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold py-2 px-4 rounded-lg transition-colors duration-300 shadow-sm" data-category="politics">Politics</button>
            <button class="category-btn bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold py-2 px-4 rounded-lg transition-colors duration-300 shadow-sm" data-category="sports">Sports</button>
            <button class="category-btn bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold py-2 px-4 rounded-lg transition-colors duration-300 shadow-sm" data-category="fashion">Fashion</button>
            <button class="category-btn bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold py-2 px-4 rounded-lg transition-colors duration-300 shadow-sm" data-category="education">Education</button>
            <button class="category-btn bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold py-2 px-4 rounded-lg transition-colors duration-300 shadow-sm" data-category="culture">Culture</button>
        </div>
    </nav>

    <!-- Main Content Area -->
    <main class="container py-8">
        <h2 id="section-heading" class="text-2xl font-bold text-gray-800 mb-6">Latest Technology Articles</h2>
        <div id="loading-message" class="text-center text-gray-500 hidden">
            <svg class="animate-spin h-8 w-8 text-indigo-500 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
            <p class="mt-2">Loading news...</p>
        </div>
        <div id="error-message" class="text-center text-red-500 hidden">
            <p>An error occurred. Please try again later.</p>
        </div>
        <div id="news-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- News articles will be dynamically inserted here -->
        </div>
    </main>

    <!-- JavaScript for fetching news articles -->
    <script>
        // Use a free news API like GNews. You'll need to sign up to get your own API key.
        // Once you have your key, replace "YOUR_API_KEY" below.
        const API_KEY = "YOUR_API_KEY"; 

        // Get references to DOM elements
        const newsContainer = document.getElementById('news-container');
        const searchForm = document.getElementById('search-form');
        const searchInput = document.getElementById('search-input');
        const loadingMessage = document.getElementById('loading-message');
        const errorMessage = document.getElementById('error-message');
        const sectionHeading = document.getElementById('section-heading');
        const categoryButtons = document.querySelectorAll('.category-btn');

        /**
         * Fetches news articles from the GNews API based on a search query.
         * @param {string} query The search term for the news articles.
         */
        async function fetchNews(query = 'technology') {
            // Show loading state and hide any previous messages
            newsContainer.innerHTML = '';
            loadingMessage.classList.remove('hidden');
            errorMessage.classList.add('hidden');

            // Check if the API key is set
            if (API_KEY === "YOUR_API_KEY" || !API_KEY) {
                loadingMessage.classList.add('hidden');
                newsContainer.innerHTML = '<div class="text-center p-8 bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 rounded-lg"><p class="font-bold">API Key Required!</p><p>Please get a free API key from GNews and replace "YOUR_API_KEY" in the JavaScript code.</p></div>';
                return;
            }

            // Update the section heading
            const formattedQuery = query.charAt(0).toUpperCase() + query.slice(1);
            sectionHeading.textContent = `Latest ${formattedQuery} Articles`;

            const endpoint = `https://gnews.io/api/v4/search?q=${encodeURIComponent(query)}&lang=en&country=us&max=9&apikey=${API_KEY}`;
            
            try {
                const response = await fetch(endpoint);

                // Handle HTTP errors
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const data = await response.json();

                // If no articles are found
                if (!data.articles || data.articles.length === 0) {
                    newsContainer.innerHTML = '<p class="text-center text-gray-500">No articles found for this topic. Please try a different search term.</p>';
                    return;
                }

                // Loop through articles and create HTML elements
                data.articles.forEach(article => {
                    const articleCard = document.createElement('a');
                    articleCard.href = article.url;
                    articleCard.target = '_blank'; // Open link in a new tab
                    articleCard.classList.add('article-card', 'flex', 'flex-col');
                    
                    // Create the image element
                    const image = document.createElement('img');
                    image.src = article.image || 'https://placehold.co/600x400/E5E7EB/9CA3AF?text=No+Image';
                    image.alt = article.title;
                    image.classList.add('w-full', 'h-48', 'object-cover', 'rounded-t-xl');
                    
                    // Create the content div
                    const contentDiv = document.createElement('div');
                    contentDiv.classList.add('p-6', 'flex-1', 'flex', 'flex-col');

                    // Create the title
                    const title = document.createElement('h3');
                    title.textContent = article.title;
                    title.classList.add('text-lg', 'font-semibold', 'text-gray-900', 'mb-2', 'leading-tight');

                    // Create the description
                    const description = document.createElement('p');
                    description.textContent = article.description || 'No description available.';
                    description.classList.add('text-gray-600', 'text-sm', 'mb-4', 'flex-1');
                    
                    // Create the source and date info
                    const sourceInfo = document.createElement('div');
                    sourceInfo.classList.add('text-xs', 'text-gray-500', 'mt-auto');
                    sourceInfo.innerHTML = `
                        <span class="font-medium">${article.source.name}</span>
                        <span> â€¢ </span>
                        <span>${new Date(article.publishedAt).toLocaleDateString()}</span>
                    `;

                    // Append elements to the card
                    contentDiv.appendChild(title);
                    contentDiv.appendChild(description);
                    contentDiv.appendChild(sourceInfo);
                    articleCard.appendChild(image);
                    articleCard.appendChild(contentDiv);
                    
                    // Append the finished card to the container
                    newsContainer.appendChild(articleCard);
                });

            } catch (error) {
                console.error("Failed to fetch news:", error);
                errorMessage.classList.remove('hidden');
            } finally {
                // Hide loading message once operation is complete
                loadingMessage.classList.add('hidden');
            }
        }

        // Add event listener to the search form
        searchForm.addEventListener('submit', (event) => {
            event.preventDefault(); // Prevent the form from refreshing the page
            const query = searchInput.value.trim();
            if (query) {
                fetchNews(query);
            }
        });

        // Event listener for category buttons
        categoryButtons.forEach(button => {
            button.addEventListener('click', () => {
                const newQuery = button.dataset.category;
                fetchNews(newQuery);
                updateActiveButton(newQuery);
            });
        });

        /**
         * Updates the active state of category buttons.
         * @param {string} activeCategory The category to set as active.
         */
        function updateActiveButton(activeCategory) {
            categoryButtons.forEach(button => {
                if (button.dataset.category === activeCategory) {
                    button.classList.remove('bg-gray-200', 'text-gray-800', 'shadow-sm');
                    button.classList.add('bg-indigo-500', 'text-white', 'shadow-md');
                } else {
                    button.classList.remove('bg-indigo-500', 'text-white', 'shadow-md');
                    button.classList.add('bg-gray-200', 'text-gray-800', 'shadow-sm');
                }
            });
        }

        // Fetch default news and set initial active button on page load
        fetchNews();
        updateActiveButton('technology');
    </script>

</body>
</html>
